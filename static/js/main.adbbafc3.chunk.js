(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{42:function(e,t,s){},44:function(e,t,s){},45:function(e,t,s){"use strict";s.r(t);var n=s(19),c=s.n(n),a=s(9),r=s(0),l=s.n(r),i=s(2),o=(s(27),s(28),s(11)),d=s.n(o),j=s(1),b=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("header",{children:Object(j.jsx)("nav",{className:"navbar",children:Object(j.jsxs)("div",{className:"navbar-brand",children:[Object(j.jsx)(a.c,{to:"/",className:function(e){var t=e.isActive;return d()("navbar-item is-tab",{"is-active":t})},children:"Home"}),Object(j.jsx)(a.c,{to:"/people",className:function(e){var t=e.isActive;return d()("navbar-item is-tab",{"is-active":t})},children:"People"})]})})}),Object(j.jsx)("main",{className:"container is-max-desktop pl-3 pr-3 mt-5",children:Object(j.jsx)(i.b,{})})]})},u=function(){return Object(j.jsx)("h1",{className:"title",children:"Home page"})},m=(s(30),s(5)),h=s(20),O=s.n(h),p=(s(42),s(8)),x=s(3),f=s.n(x),v=l.a.createContext({people:[],setPeople:function(){}}),N=function(e){var t=e.children,s=Object(r.useState)([]),n=Object(m.a)(s,2),c=n[0],a=n[1];Object(r.useEffect)((function(){var e=function(){var e=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://mate-academy.github.io/react_people-table/api/people.json").then((function(e){return e.json()})).then(a);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var l=Object(r.useMemo)((function(){return{people:c,setPeople:a}}),[c]);return Object(j.jsx)(v.Provider,{value:l,children:t})},g=function(){return Object(r.useContext)(v)},_=s(21),w=function(e){var t=e.person;return Object(j.jsx)(_.a,{selector:"#".concat(t.slug),children:Object(j.jsx)(a.b,{to:"/people/".concat(t.slug),className:"f"===t.sex?"has-text-danger":"has-text-link",children:t.name})})},y=function(e){var t=e.person,s=g().people,n=s.find((function(e){return e.name===t.motherName})),c=s.find((function(e){return e.name===t.fatherName}));return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("td",{children:Object(j.jsx)(w,{person:t})}),Object(j.jsx)("td",{children:t.sex}),Object(j.jsx)("td",{children:t.born}),Object(j.jsx)("td",{children:t.died}),Object(j.jsx)("td",{children:n?Object(j.jsx)(w,{person:n}):t.motherName||"unknown"}),Object(j.jsx)("td",{children:c?Object(j.jsx)(w,{person:c}):t.fatherName||"unknown"})]})},C=function(){var e=g().people,t=Object(i.g)(),s=Object(i.h)(),n=Object(a.d)(),c=Object(m.a)(n,1)[0],l=c.get("query")||"",o=Object(r.useState)(l),b=Object(m.a)(o,2),u=b[0],h=b[1],p=c.get("sortBy")||"",x=c.get("sortOrder")||"",f=Object(r.useMemo)((function(){return e.filter((function(e){var t,s;return e.name.toLowerCase().includes(l)||(null===(t=e.fatherName)||void 0===t?void 0:t.toLowerCase().includes(l))||(null===(s=e.motherName)||void 0===s?void 0:s.toLowerCase().includes(l))}))}),[e,l]),v=Object(r.useCallback)(O()((function(e){e?c.set("query",e.toLowerCase().trimLeft()):c.delete("query"),s("?".concat(c.toString()))}),500),[]),N=function(e){!function(e){c.set("sortBy",e),c.set("sortOrder","asc"===x?"desc":"asc"),s("?".concat(c.toString()))}(e),f.sort((function(t,s){switch(e){case"name":case"sex":return"asc"===x?s[e].localeCompare(t[e]):t[e].localeCompare(s[e]);case"born":case"died":return"asc"===x?s[e]-t[e]:t[e]-s[e];default:return 0}}))};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"is-flex is-justify-content-space-between mb-3",children:[Object(j.jsxs)("p",{className:"control has-icons-left",children:[Object(j.jsx)("input",{type:"search",value:u,onChange:function(e){h(e.target.value),v(e.target.value)},placeholder:"Find a person",className:"input",style:{width:"260px"}}),Object(j.jsx)("span",{className:"icon is-small is-left",children:Object(j.jsx)("i",{className:"fas fa-search"})})]}),Object(j.jsx)(a.b,{to:"/people/new",className:"button is-success",children:"Add a person"})]}),Object(j.jsxs)("table",{className:"table is-hoverable",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[["Name","Sex","Born","Died"].map((function(e){return Object(j.jsx)("th",{className:d()("table__sort",{"table__sort--asc":"asc"===x&&p===e.toLowerCase(),"table__sort--desc":"desc"===x&&p===e.toLowerCase()}),onClick:function(){N(e.toLowerCase())},children:e},e)})),Object(j.jsx)("th",{children:"Mother"}),Object(j.jsx)("th",{children:"Father"})]})}),Object(j.jsx)("tbody",{children:f.map((function(e){return Object(j.jsx)("tr",{id:e.slug,className:d()({"has-background-warning":t.pathname==="/people/".concat(e.slug)}),children:Object(j.jsx)(y,{person:e})},e.slug)}))})]})]})},k=function(){var e=g().people;return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{className:"title",children:"People page"}),e.length>0&&Object(j.jsx)(C,{})]})},P=s(4),A=s(6),S=s(22),F=(s(44),function(){var e=g(),t=e.people,s=e.setPeople,n=Object(i.h)(),c=Object(S.a)({mode:"onChange"}),a=c.register,l=c.handleSubmit,o=c.formState,b=o.errors,u=o.isValid,m=c.getValues,h=c.reset,O=m(),p=(new Date).getFullYear(),x=function(e){return t.filter((function(t){return t.sex===e&&t.born<O.born&&t.died>=O.born}))},f=Object(r.useMemo)((function(){return x("f")}),[O.born]),v=Object(r.useMemo)((function(){return x("m")}),[O.born]);return Object(j.jsxs)("div",{className:"form",children:[Object(j.jsx)("button",{type:"button",className:"form__back-btn button is-danger",onClick:function(){return n(-1)},children:Object(j.jsx)("span",{className:"icon",children:Object(j.jsx)("i",{className:"fas fa-arrow-left"})})}),Object(j.jsx)("h1",{className:"title has-text-centered mb-6",children:"Add a new person"}),Object(j.jsxs)("form",{autoComplete:"off",onSubmit:l((function(e){var c=e,a="".concat(c.name.toLowerCase().split(" ").join("-"),"-").concat(c.born);c=Object(A.a)(Object(A.a)({},c),{},{slug:a}),s([].concat(Object(P.a)(t),[c])),n("/people"),h()})),children:[Object(j.jsxs)("div",{className:"form__field",children:[Object(j.jsx)("input",Object(A.a)(Object(A.a)({type:"text"},a("name",{required:"*Please, enter a name",pattern:{value:/^[A-Za-z][A-Za-z ]*$/,message:"*Name should contain only letters"}})),{},{className:d()("input",{"is-danger":null===b||void 0===b?void 0:b.name,"is-success":O.name}),placeholder:"Enter a name"})),(null===b||void 0===b?void 0:b.name)&&Object(j.jsx)("p",{className:"help is-danger",children:null===b||void 0===b?void 0:b.name.message})]}),Object(j.jsxs)("div",{className:"form__wrapper",children:[Object(j.jsx)("div",{className:"form__field form__field--radio",children:Object(j.jsxs)("label",{htmlFor:"male",className:"radio",children:[Object(j.jsx)("input",Object(A.a)(Object(A.a)({id:"male",type:"radio"},a("sex",{required:"*Please, select a gender"})),{},{value:"m"})),"\xa0Male"]})}),Object(j.jsx)("div",{className:"form__field form__field--radio",children:Object(j.jsxs)("label",{htmlFor:"female",className:"radio",children:[Object(j.jsx)("input",Object(A.a)(Object(A.a)({id:"female",type:"radio"},a("sex",{required:"*Please, select a gender"})),{},{value:"f"})),"\xa0Female"]})}),(null===b||void 0===b?void 0:b.sex)&&Object(j.jsx)("p",{className:"help is-danger",children:null===b||void 0===b?void 0:b.sex.message})]}),Object(j.jsxs)("div",{className:"form__field-wrapper is-flex",children:[Object(j.jsxs)("div",{className:"form__field",children:[Object(j.jsx)("input",Object(A.a)(Object(A.a)({type:"number"},a("born",{required:"*Please, enter a year of birth",min:{value:1400,message:"*A year should be between 1400 and ".concat(p)},max:{value:p,message:"*A year should be between 1400 and ".concat(p)}})),{},{className:d()("input",{"is-danger":null===b||void 0===b?void 0:b.born,"is-success":O.born}),placeholder:"Enter a year of birth"})),(null===b||void 0===b?void 0:b.born)&&Object(j.jsx)("p",{className:"help is-danger",children:null===b||void 0===b?void 0:b.born.message})]}),Object(j.jsxs)("div",{className:"form__field",children:[Object(j.jsx)("input",Object(A.a)(Object(A.a)({type:"number"},a("died",{disabled:!1,min:{value:O.born,message:"*Please, enter a valid year of death"},max:{value:+O.born+150,message:"*A person can't be older then 150"}})),{},{className:d()("input",{"is-danger":null===b||void 0===b?void 0:b.died,"is-success":O.died}),placeholder:"Enter a year of death",disabled:!O.born})),(null===b||void 0===b?void 0:b.died)&&Object(j.jsx)("p",{className:"help is-danger",children:null===b||void 0===b?void 0:b.died.message})]})]}),Object(j.jsxs)("div",{className:"form__field-wrapper is-flex",children:[Object(j.jsx)("div",{className:"form__field select",children:Object(j.jsxs)("select",Object(A.a)(Object(A.a)({},a("motherName")),{},{className:"form__select",disabled:!O.born,children:[Object(j.jsx)("option",{value:"",children:"Select mother's name"}),f.map((function(e){return Object(j.jsx)("option",{value:e.name,children:e.name},e.slug)}))]}))}),Object(j.jsx)("div",{className:"form__field select",children:Object(j.jsxs)("select",Object(A.a)(Object(A.a)({},a("fatherName")),{},{className:"form__select",disabled:!O.born,children:[Object(j.jsx)("option",{value:"",children:"Select father's name"}),v.map((function(e){return Object(j.jsx)("option",{value:e.name,children:e.name},e.slug)}))]}))})]}),Object(j.jsx)("input",{type:"submit",value:"Add",className:"form__btn button is-success",disabled:!u})]})]})}),L=function(){return Object(j.jsx)("h1",{className:"title",children:"Page not found"})},q=function(){return Object(j.jsx)(N,{children:Object(j.jsx)(i.e,{children:Object(j.jsxs)(i.c,{path:"/",element:Object(j.jsx)(b,{}),children:[Object(j.jsx)(i.c,{index:!0,element:Object(j.jsx)(u,{})}),Object(j.jsx)(i.c,{path:"/home",element:Object(j.jsx)(i.a,{to:"/",replace:!0})}),Object(j.jsx)(i.c,{path:"people",element:Object(j.jsx)(k,{}),children:Object(j.jsx)(i.c,{path:":slug",element:Object(j.jsx)(k,{})})}),Object(j.jsx)(i.c,{path:"people/new",element:Object(j.jsx)(F,{})}),Object(j.jsx)(i.c,{path:"*",element:Object(j.jsx)(L,{})})]})})})};c.a.render(Object(j.jsx)(a.a,{children:Object(j.jsx)(q,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.adbbafc3.chunk.js.map